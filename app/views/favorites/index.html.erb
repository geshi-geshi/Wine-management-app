<% provide(:title, 'お気に入りワイン一覧') %>
<% provide(:button_text, '更新') %>
										
<section class="wines-index">
	<h1>お気に入りワイン</h1>
	<h2>
		<% if @favorites_count == 0 %>
			お気に入りはありません
		<% else %>
			<%= @favorites_count %>件あります
		<% end %>
	</h2>
	<div class="col-md-10 col-md-offset-1">
		<% if @wines.empty? %>
			<p class="empty">
				検索結果が見つかりません。<br>
				キーワードを入れなおし、もう一度検索してください。
			</p>
		<% else %>
			<div class="row">
				<% @user.favorites.each do |favorite| %>
					<div class="col-lg-4">
						<div class="card">
							<% if logged_in? %>
								<%= link_to "お気に入りを解除する", add_favorite_path(favorite.wine), method: :delete, class: "btn btn-danger favorite-btn hover" %>								
							<% end %>
							<div class="card-body">
								<div class="img-area">
									<% if favorite.wine.image? %>
										<%= image_tag wine.image.to_s %>
									<% else %>
										<%= image_tag "no-image.png", :size =>'230x170' %>
									<% end %>
								</div>
								<h4 class="card-title">
									<%= favorite.wine.name %>（<%= favorite.wine.color %>）
								</h4>
								<p class="card-text">品種：<%= favorite.wine.grape_variety %><br>
								国：<%= favorite.wine.country %><br>
								<% if favorite.wine.production_year.present? %>
									生産年：<%= favorite.wine.production_year %>年
								<% else %>
									生産年：- 年
								<% end %>
								</p> 
								<%# <div class="btn-wine-area"> %>
								 	<div class="wine-show-btn">
										<%= link_to "ワインの詳細を見る", wine_path(favorite.wine), remote: true, class: "btn btn-info" %>					
									</div>
									<div class="wine-rakuten-search-btn">
										<%= link_to "楽天市場で検索する", wines_rakuten_search_path(favorite.wine), remote: true, class: "btn btn-success" %>
									</div>
									
								<%# </div> %>
							</div> <!-- card-body -->
						</div> <!-- card -->
					</div> <!-- col-lg-4 -->				
				<% end %>
			</div>
		<% end %>
	</div>
</section>

<!--モーダルウインドウ表示-->
<div id="show-wine" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true"></div>
<div id="edit-wine" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true"></div>
<div id="rakuten-search" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true"></div>
